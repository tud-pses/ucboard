

\chapter{Git-Repository}


\section{Ort}

\href{https://github.com/tud-pses/ucboard}{\color[rgb]{0,0,1}https://github.com/tud-pses/ucboard}

\section{Inhalt}

\begin{tabular}{lp{12cm}}
	\verb|datasheets\| & Datenblätter der Sensoren sowie Datenblätter der Bauteile der Schaltungen \\
	\verb|doc\| & Latex-Dateien um dieses Dokument zu erstellen \\
	\verb|fw_releases\| & (firmware\_releases) bin-Dateien der wesentlichen Firmwareversionen \\
	\verb|fw_workspace\| & (firmware\_workspace) Workspace der Entwicklungsumgebung, Sourcecode des auf dem Mikrocontroller laufenden Programms \\
	\verb|kicad_drvbatswitch\| & KiCad-Dateien (Schaltplan und Layout) der kleinen Schaltplatine für den den Fahrakku \\
	\verb|kicad_ucboard\| & KiCad-Dateien (Schaltplan und Layout) der ucboard-Platine \\
	\verb|kicadlibs\| & KiCad-Bibliotheken mit Bauteilen für drvbatswitch und ucboard \\
	\verb|matlab\| & Matlab-Klasse zur direkten Kommunikation mit ucboard, Skripte zur Betrachtung von Sensorwerten\\
	\verb|mfg\| & Fertigungsdaten (Gerber-Format) für Platinen \\
	\verb|stm32cubemx\| & Projekt für STM32CubeMX (Programm zur Konfiguration des Mikrocontollers) \\
	\verb|ucterm\| & Einfaches in C\# geschriebenes Terminalprogramm für Entwicklung am ucboard
\end{tabular}


\section{Firmware-Releases}

Im Verzeichnis \verb|fw_releases\| befinden sich die Firmware-Versionen (Programme für den Mikrocontroller) zu bestimmten Versionständen. Die bin-Dateien sind dabei nach dem Schema
\begin{center}
	\texttt{pses\_ucboard\_ver\textit{VERSIONSNUMMER}\_\texttt{BUILDCONF}.bin}
\end{center}
benannt, so \zB
\begin{center}
	\texttt{pses\_ucboard\_ver0.9.0\_Debug.bin}
\end{center}

Zu jeder Version, die in diesem Verzeichnis liegt, sollte im Git-Repository ein Tag der Form
\begin{center}
	\texttt{fwver\_\textit{VERSIONSNUMMER}}
\end{center}
vorhanden sein. Zu dem Beispiel oben gehört also der Tag
\begin{center}
	\texttt{fwver\_0.9.0}
\end{center}

Während der Weiterentwicklung bis zu einem Stand, der eine neue Versionsnummer erhält, sollte der Versionsnummer in \verb|version.h| ein "`\verb|+|"' angehängt werden, also \zB \verb|0.9.0+|. (Idealerweise wird das \verb|+| direkt nach dem Erzeugen der Release-Version angehängt, um zu vermeiden dies zu vergessen.)

Für Weiterentwicklungen innerhalb der Gruppen sollte dem Versionsstring noch der Gruppenname oder eine ähnliche Kennzeichnung hinzugefügt werden.


\tabref{tab:repo:fw_versions} gibt eine Übersicht über die Firmware-Versionen.

\begin{table}[htbp]%
	\centering
	\caption{Übersicht über Firmware-Versionen}
	\label{tab:repo:fw_versions}
	\begin{tabular}{llp{10cm}}
		\mytoprule
		Version & Datum & Kommentar \\
		\mymidrule
		0.11.3
			& 14.02.2018
			& -- Beseitigung von Bugs bei Peripherieansteuerung (i2cmgr) \newline 
				-- Deaktivieren der UART3-Schnittstelle (RS232) \\
		0.11.2
			& 13.12.2017
			& -- Beseitigung von Bugs bei Peripherieansteuerung (i2cmgr) \\
		0.11.1
			& 09.11.2017
			& -- Beseitigung von Bugs bei Peripherieansteuerung \\
		0.11.0
			& 26.11.2016
			& -- Magnetometer in Betrieb genommen \\
		0.10.1
			& 07.11.2016
			& -- Standardeinstellungen geändert: US ist nach Neustart aus, Kinect ist nach Neustart ein \\
		0.10.0
			& 03.11.2016
			& -- Befehl \verb|IMU| hinzugefügt (Parametrierung IMU) \newline
				-- Interne Änderung im Kommunikationsstack \\
		0.9.1
			& 01.11.2016
			& -- Befehl \verb|US| hinzugefügt (Ein- und Ausschalten und Parametrierung US-Sensoren) \newline
				-- Beseitigung von Bugs im Kommunikationsstack \\
		0.9.0
			& 25.10.2016
			& Grundfunktionalität weitgehend vorhanden. (Es fehlen noch die Befehle zum Parametrieren und Kalibrieren der Sensoren und der Treiber für das Magnetometer.) \\
		\mybottomrule
	\end{tabular}
\end{table}



\paragraph{Roadmap}


\begin{table}[htbp]%
	\centering
	\caption{Roadmap Firmware}
	\label{tab:repo:fw_roadmap}
	\begin{tabular}{lp{10cm}}
		\mytoprule
		Version & Kommentar \\
		\mymidrule
		0.12.0
			& Verwenden der in IMU abgelegten Offsetwerte für Drehratensensor \\
		0.12.0
			& Befehle zur Ansteuerung der LEDs und zur Abfrage der Taster \\
		x
			& -- [intern] Auf"|teilen Kommunikationsstack in Befehlsbearbeitung und UART-Treiber \\
		x
			& -- [intern] Umstellen der UART-Kommunikation auf DMA \\
		1.0.0
			& -- Befehlsbasierte (= textbasierte) benutzerdefinierte Initialisierung über EEPROM \\
		1.1.0
			& -- Kalibrierungsroutinen \\
		x
			& -- [intern] Code-Review, Gleiche/Ähnliche Funktionen zusammenfassen, \ldots \\
		\mybottomrule
	\end{tabular}
\end{table}
